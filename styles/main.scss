---
---

@mixin color-scheme-light {
	--color-scheme: light;

	--body-color: #000;
	--body-bg-color: #eee;

	--header-bg-color: #f8f8f8;
	--header-border-color: #ccc;
	--nav-hover-color: #000;

	--content-bg-color: #fff;
	--content-subheader-color: #888;

	--link-color: #005;
	--link-hover-bg-color: #346;
	--link-hover-color: #fff;

	--light-border-color: #ddd;
	--light-frame-color: #111;
	--light-frame-bg-color: #fafaff;

	--mark-border-color: #ca8;
	--mark-frame-bg-color: #fed;

	--anchor-target-highlight-color: #f88;
	--abbr-underline-color: #888;
	--blockquote-border-color: #bbb;
}

@mixin color-scheme-dark {
	--color-scheme: dark;

	--body-color: #ddd;
	--body-bg-color: #000;

	--header-bg-color: #080808;
	--header-border-color: #333;
	--nav-hover-color: #ddd;

	--content-bg-color: #111;
	--content-light-bg-color: #f8f8f8;
	--content-subheader-color: #aaa;

	--link-color: #eec;
	--link-hover-bg-color: #fed;
	--link-hover-color: #000;

	--light-border-color: #333;
	--light-frame-color: #eee;
	--light-frame-bg-color: #1a1a1a;

	--mark-border-color: #862;
	--mark-frame-bg-color: #321;

	--anchor-target-highlight-color: #820;
	--abbr-underline-color: #aaa;
	--blockquote-border-color: #555;
}

:root {
	@include color-scheme-light;
	@media screen {
		@media (prefers-color-scheme: dark) { @include color-scheme-dark; }
		&.color-scheme-light { @include color-scheme-light; }
		&.color-scheme-dark { @include color-scheme-dark; }
	}
}

a, a:link, a:visited, button { color: var(--link-color); }
a:hover, button:hover { background-color: var(--link-hover-bg-color); color: var(--link-hover-color); text-decoration: none; }
svg a:hover { opacity: 0.5; }
button { border: 0; background-color: unset; padding: 0; line-height: inherit; cursor: pointer; }

div { padding: 0; margin: 0; }
p, h1, h2, h3, ul, ol, dl { margin: 1ex 0; padding: 0; }
ul,ol,dl { margin-left: 2em; }
ul { list-style-type: square; }
ul ul { margin-bottom: 0; }
li:not(:last-child) { margin-bottom: 0.5em; }
hr { width: 80%; }
dt { margin-top: 0.5em; }
blockquote { border-left: 2px solid var(--blockquote-border-color); padding-left: 1ex; margin-left: 1ex; }
hr { width: 90%; height: 0; border: 0; border-top: solid 1px var(--body-color); background: transparent; margin: 2em auto; }
pre { tab-size: 4; font-size: 90%; }

emoji { font-family: emoji; }

table {
	margin: 0.5em;
	padding: 0em;
	border-width: 0;

	td { padding: 0.2em 0.5em; margin: 0; }
	th { text-align: center; }
	tr { vertical-align: top; }
}

body {
	color: var(--body-color);
	margin: 0;
	line-height: 1.4;

	@media screen {
		font-family: sans-serif;
		background-color: var(--body-bg-color);
	}

	@media print {
		font-family: serif;
		margin: 0 1cm;
	}
}

body > header {
	margin: 0;
	padding: 0;

	@media screen {
		background-color: var(--header-bg-color);
		border-bottom: 3px solid var(--header-border-color);
	}

	nav {
		h1 {
			text-align: center;
			margin: 0;
			padding: 0.5em 0.6rem;
			font-size: 1.2em;

			@media print {
				padding: 0;
				text-align: right;
			}
		}

		@media screen and (min-width: 45em) {
			max-width: 50em;
			margin: 0 auto;

			display: grid;
			grid-template-columns: auto min-content;

			h1 {
				text-align: left;
			}

			ul {
				white-space: nowrap;
				align-self: end;
			}
		}

		ul {
			@media print {
				visibility: hidden;
			}

			display: table;
			table-layout: fixed;

			margin: 0 auto;
			padding: 0;

			list-style-type: none;

			li {
				display: table-cell;
				position: relative;
				padding: 0.2rem 0.6rem;
				vertical-align: bottom;

				a, button {
					display: block;
					text-decoration: none;
					font-weight: bold;
				}

				&:hover, &:hover a, &:hover button {
					background-color: var(--nav-hover-color);
					color: var(--link-hover-color);
				}
			}
		}
	}
}

div.utterances {
	@media screen { max-width: 45em; }
	@media print { display: none; }
}

div#content, article#content {
	padding: 1em;

	@media screen {
		margin: 0 auto;
		padding: 0.5em;
		background-color: var(--content-bg-color);
		border-bottom: 2px solid var(--light-border-color);
	}

	@media screen and (min-width: 45em) {
		box-sizing: border-box;
		margin: 2em auto;
		padding: 2em;
		max-width: 45em;
		border: 2px solid var(--light-border-color);
	}
}

article#content p, article#content li, dl#posts p {
	@media screen and (min-width: 45em) { text-align: justify; }
	@media print { text-align: justify; }
}

article#content header {
	p, a { text-align: right; color: var(--content-subheader-color); }
	a:hover { color: var(--link-hover-color); }
}

dl#posts {
	margin: 0;

	dd a:first-child {
		font-size: 1.1em;
	}
}

#content {
	h1 { font-size: 1.5em; }
	h2 { font-size: 1.3em; }

	img, svg {
		display: block;
		width: 97%;
		margin: 1.5em auto;

		@media print {
			object-fit: contain;
			max-height: 7cm;
		}
	}

	figure {
		width: 97%;
		margin: 1em auto;

		figcaption {
			text-align: center;
		}

		img, svg, pre, p, table {
			box-sizing: border-box;
			width: 100%;
			margin: 0 auto;
		}

		&.no-resize {
			img, svg, pre, p, table {
				width: unset;
				max-width: 100%;
			}
		}

		&.transparent-bg-light {
			img, svg, pre, p, table {
				@media screen {
					@media (prefers-color-scheme: dark) { background-color: var(--content-light-bg-color); }
					:root.color-scheme-dark & { background-color: var(--content-light-bg-color); }
				}
			}
		}

		@media print {
			&.video { display: none; }
		}
	}

	table img {
		box-sizing: unset;
		display: unset;
		width: unset;
		margin: unset;
	}

	pre {
		margin: 1em 0;
		padding: .5em;
		overflow: auto;
	}

	code {
		padding: 0 .2em;
	}

	pre code {
		padding: 0;
		border: none;
	}

	@media screen {
		pre, code, table {
			background-color: var(--light-frame-bg-color);
			color: var(--light-frame-color);
			border: 1px solid var(--light-border-color);
		}

		a:hover pre, a:hover code {
			outline: 2px solid var(--link-hover-bg-color);
		}
	}

	@media print {
		pre {
			border-top: 1px solid var(--light-border-color);
			border-bottom: 1px solid var(--light-border-color);
		}
	}

	p.mark {
		@media screen {
			border: 3px solid var(--mark-border-color);
			background-color: var(--mark-frame-bg-color);
			padding: 1ex;
			font-size: 110%;
		}

		@media print {
			border-left: 3px solid black;
			border-right: 3px solid black;
			padding-left: 1ex;
			padding-right: 1ex;
		}
	}

	div.iframe {
		position: relative;
		overflow: hidden;

		iframe {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			border: 0;
		}

		&.iframe-16x9 {
			padding-top: 56.25%;
		}
	}

	div.grid-2 {
		display: grid;
		grid-template-columns: 1fr 1fr;
		grid-gap: 5px;

		@media screen and (max-width: 40em) {
			grid-template-columns: 1fr;
		}

		img {
			width: 100%;
			margin: auto;
		}

		> a:hover {
			background-color: unset;
			outline: 2px solid var(--link-hover-bg-color);
		}
	}
}

details#toc {
	margin: 1em 0;
	padding: .5em;
	border: 1px solid transparent;

	summary {
		text-decoration: underline;
		cursor: pointer;
		color: var(--link-color);
	}

	@media screen {
		&[open] {
			background-color: var(--light-frame-bg-color);
			border: 1px solid var(--light-border-color);
		}
	}

	@media print {
		display: none;
	}
}

/* highlight anchor targets */
@media screen {
	#content :target { animation: highlight 2s; }
	@keyframes highlight { 10% { background: var(--anchor-target-highlight-color); } }
}

abbr[title] {
	@media screen {
		text-decoration-color: var(--abbr-underline-color);
		cursor: help;
	}

	@media not all and (pointer: fine) {
		/* chrome on android has hover: hover :-( */
		&:hover::after, &:focus::after {
			content: " (" attr(title) ")";
		}
	}

	@media print {
		text-decoration: none;

		&::after {
			content: " (" attr(title) ")";
		}
	}
}
